<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Template يتم تثبيته في قاعدة بيانات العميل -->
    
    <!-- Webclient Template Override -->
    <template id="storage_quota_banner_webclient" inherit_id="web.webclient_bootstrap">
        <xpath expr="//head" position="inside">
            <script type="text/javascript">
                odoo.define('storage_quota_banner', function(require) {
                    "use strict";
                    
                    var AbstractAction = require('web.AbstractAction');
                    var core = require('web.core');
                    var session = require('web.session');
                    var rpc = require('web.rpc');
                    
                    // Check storage quota on page load
                    $(document).ready(function() {
                        checkStorageQuota();
                    });
                    
                    function checkStorageQuota() {
                        rpc.query({
                            model: 'storage.quota.banner',
                            method: 'get_banner_info',
                            args: []
                        }).then(function(result) {
                            if (result &amp;&amp; result.show_banner) {
                                showBanner(result.message, result.type);
                            }
                        });
                    }
                    
                    function showBanner(message, type) {
                        var $banner = $('&lt;div&gt;').addClass('storage-quota-banner');
                        
                        var bgColor = '#d32f2f'; // danger
                        if (type === 'warning') {
                            bgColor = '#ff9800';
                        }
                        
                        $banner.css({
                            'position': 'fixed',
                            'top': '0',
                            'left': '0',
                            'right': '0',
                            'background': 'linear-gradient(135deg, ' + bgColor + ' 0%, ' + bgColor + ' 100%)',
                            'color': 'white',
                            'padding': '15px 20px',
                            'text-align': 'center',
                            'z-index': '10000',
                            'box-shadow': '0 2px 10px rgba(0,0,0,0.3)',
                            'font-family': 'Arial, sans-serif'
                        });
                        
                        $banner.html('&lt;strong&gt;⛔ ' + message + '&lt;/strong&gt;');
                        
                        if (!$('.storage-quota-banner').length) {
                            $('body').prepend($banner);
                            $('body').css('padding-top', '60px');
                        }
                    }
                });
            </script>
        </xpath>
    </template>
    
</odoo>
